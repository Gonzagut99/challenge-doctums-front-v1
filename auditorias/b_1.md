# Archivo para mapeo de bugs v0.1

## Bug Carga de partida
- Error al crear una partida
- client side
- useState bad managing

## Bug carga de canvas
- Cuando el host quiere iniciar una partida, esta no renderiza el canva del mapa del juego.
- (Hipotesis) no hay hipotesis del por que de este comportamiento.

## Bug de emit events
- (Hipotesis) esto podria estar relacionado con el tema de que las conexiones websocket se estan cerrando por tiempo de inactividad, posiblemente debamos revisar logica del back, pero.
``` json
Log de error
TypeError: Cannot read properties of undefined (reading 'emit')
    at _layout (eval at instantiateModule (file:///C:/Users/Lenovo/Documents/CERTUS%20VI/Exp%20Formativas/challenge-doctums-front-v1/node_modules/vite/dist/node/chunks/dep-BWSbWtLw.js:52963:24), <anonymous>:175:34)
    at renderWithHooks (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5724:16)
    at renderIndeterminateComponent (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5798:15)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6023:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderContextProvider (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5997:3)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6094:11)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderIndeterminateComponent (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5852:7)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6023:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderContextProvider (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5997:3)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6094:11)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderIndeterminateComponent (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5852:7)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6023:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderIndeterminateComponent (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5852:7)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6023:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderIndeterminateComponent (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5852:7)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6023:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderNode (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6336:12)
    at renderChildrenArray (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6288:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6218:7)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderContextProvider (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5997:3)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6094:11)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderIndeterminateComponent (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5852:7)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6023:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderNode (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6336:12)
    at renderChildrenArray (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6288:7)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6218:7)
    at renderNodeDestructive (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6153:14)
    at renderNode (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6336:12)
    at renderHostElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:5708:3)
    at renderElement (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6029:5)
    at renderNodeDestructiveImpl (C:\Users\Lenovo\Documents\CERTUS VI\Exp Formativas\challenge-doctums-front-v1\node_modules\react-dom\cjs\react-dom-server.node.development.js:6181:11)
```

**Observaciones**
- En las auditorios podemos observar que en el archivo `app/routes/game+/_layout.tsx`, maneja algunos estados claves `avatarId`, `legacyModal_hasNavigated`, y `submitPlan_hasNavigated`.
- Esta ruta `_layout` al parecer es la que maneja todo lo relacionado con renderizado de modals (esto incluye el modal de crear partida y seleccion de personaje ?)
- useLiveLoader, hook que puede estar afectando la carga de modals.

**Modificaciones a realizar**
- Implementar mecanismos de fallback.

- **WebSocket Initialization and Usage:** Ensure `globalWebSocketService` is correctly initialized to avoid errors when calling its methods. Handle network issues or incorrect session codes gracefully.
- **State Management:** Properly initialize and update state variables like `avatarId`, `legacyModal_hasNavigated`, and `submitPlan_hasNavigated` to prevent navigation issues or incorrect modal displays.
- **Data Fetching and Handling:** Validate server responses in the `loader` function to prevent crashes. Ensure form data in the `action` function is correct to avoid processing errors.
- **Navigation:** Verify conditions for `navigate` function calls to prevent incorrect paths or errors.
- **Component Rendering:** Ensure components like `GameCanvas`, `LocalPlayerCard`, and `PlayerCard` receive correct props to avoid rendering errors.
- **Event Handling:** Manage game states correctly in functions like `triggerTurnOrderStage` and `triggerRollDices` to maintain game flow.
- **Audio and Visual Effects:** Manage triggers for components like `NotificationSound` to ensure correct audio/visual feedback.